{% load static %}

<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">

    <title>{% block title %} {% endblock%}</title>

    <!-- Bootstrap core CSS -->
    <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="{% static 'assets/css/fontawesome.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/owl.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
  </head>
<body>



  <div class="sub-header">
    <div class="container">
      <div class="row">
        <div class="col-md-8 col-xs-12">
          <ul class="left-info">
            <li><a href="#"><i class="fa fa-envelope"></i>contact@company.com</a></li>
            <li><a href="#"><i class="fa fa-phone"></i>123-456-7890</a></li>
          </ul>
        </div>
        <div class="col-md-4">
          <ul class="right-icons">
            <li><a href="#"><i class="fa fa-facebook"></i></a></li>
            <li><a href="#"><i class="fa fa-twitter"></i></a></li>
            <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <header class="">
    <nav class="navbar navbar-expand-lg" style="background-color: #bd986b;">
      <div class="container">
        <a class="navbar-brand" href="{% url 'home' %}"><h2>Apple Cart<em><h2 class="text-center">welcome {{ data.name }}</h2></i></em></h2></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link " href="{% url 'home' %}">Home
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'product' %}">Products</a>
            </li>
            <li class="nav-item ">
              <a class="nav-link" href="{% url 'cart' %}">Cart</a>
            </li>
            
            <li class="nav-item">
              {% if 'uname' in request.session %}
              <a class="nav-link" href="{% url 'logout' %}">Log out</a>
              {% else %}
              <a class="nav-link" href="{% url 'login' %}">Log in</a>
              {% endif %}
          </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>
    
    <div class="container-fluid">
      <div class="row flex-nowrap">
          <div style="height: 100vh; position: fixed; background-color: #bd986b;" class="col-auto col-md-3 col-xl-2 px-sm-2 px-0">
              <div class="d-flex flex-column align-items-center align-items-sm-start px-2 pt-2 text- min-vh-100">
                  <a href="/" class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                      <span class="fs-5 d-none d-sm-inline mt-5 mx-2">APPLECART</span>
                  </a>
                  
                  <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center text-primary align-items-sm-start" id="menu">
                    <li>
                      <a href="{% url 'profile' %}" class="nav-link px-0 align-middle mt-5">
                          <i class="fs-4 bi-people"></i> <span class="ms-1 d-none d-sm-inline text-dark mx-3 mt-5">Profile</span> </a>
                  </li> 
                  <li>
                      <a href="{% url 'my_orders' %}" class="nav-link px-0 align-middle mt-3">
                          <i class="fs-4 bi-people"></i> <span class="ms-1 d-none d-sm-inline text-dark mx-3 mt-5">My Orders</span> </a>
                  </li>
                  <li>
                    <a href="{% url 'address_list' %}" class="nav-link px-0 align-middle mt-3">
                        <i class="fs-4 bi-people"></i> <span class="ms-1 d-none d-sm-inline text-dark mx-3 mt-5">Address</span> </a>
                </li> 
                  <li>
                    <a href="{% url 'wish' %}" class="nav-link px-0 align-middle mt-3">
                        <i class="fs-4 bi-people"></i> <span class="ms-1 d-none d-sm-inline text-dark mx-3 mt-5">Wish List</span> </a>
                </li>
                  <li>
                    <a href="{% url 'admin_logout' %}" class="nav-link px-0 align-middle mt-3">
                        <i class="fs-4 bi-people"></i> <span class="ms-1 d-none d-sm-inline text-dark mx-3 mt-5">Log out</span> </a>
                </li>
                </ul>
                  <hr>
              </div>
          </div>
        </div>
      </div>
          
      
      <div class="container d-block">
 
        <div class=" container text-center mt-5 "> USERS <br> DETAILS</div>
        <div class=" container text-center mt-5 "> 
          
  <h2 class="mt-4 text-dark">Your Orders</h2> <br>
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Order ID</th>
                <th scope="col">Product</th>
                <th scope="col">Date</th>
                <th scope="col">Price</th>
                <th scope="col">Status</th>
              </tr>
            </thead>
            <tbody>
                {% for i in paged_products %}
              <tr>
                <th scope="row">{{i.order.order_number}}</th>
                            <td>{{i.Product.Product_name}}</td>
                            <td>{{i.created_at}}</td>
                            <td>{{i.payment.amount_paid}}</td>
                            {% if i.status == "Delivered" %}
                            <td class="text-success">{{i.status}}</td>
                            {% elif i.status == "Order Canceled" %}
                            <td class="text-danger">{{i.status}}</td>
                            {% elif i.status == "Shipped" %}
                            <td class="text-warning">{{i.status}}</td>
                            {% elif i.status == "Out of Delivery" %}
                            <td class="text-danger">{{i.status}}</td>
                            {% elif i.status == "Return Requested" %}
                            <td class="text-info">{{i.status}}</td>
                            {% elif i.status == "Order Placed" %}
                            <td class="text-success">{{i.status}}</td>
                            {% endif %}

                            {% if i.status == "Delivered" or i.status == "Out of Delivery" %}
                            <td ><button class="rounded px-2" data-toggle="modal" data-target="#exampleModalCenter2{{i.id}}" style="border: none; background-color: #1961FB; color: white;">Return</button></td>
                            <td class="text-dark h4"><a href="{% url 'download' i.id %}"><i class="fa-solid fa-file-pdf"></i></a></td>
                            {% elif i.status == "Order Canceled" or i.status == "Return Requested" %}
                            {% else %}
                            <td ><button class="rounded" data-toggle="modal" data-target="#exampleModalCenter{{i.id}}" style="border: none; background-color: red; color: white;">Cancel</button></td>
                            <td class="text-dark h4"><a href="{% url 'download' i.id %}"><i class="fa-solid fa-file-pdf"></i></a></td>
                            {% endif %}
                            </tr>

<!-- modal -->
<div class="modal fade" id="exampleModalCenter{{i.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Are you sure you want to cancel the order...?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary"><a class="text-white" href="{% url 'cancel_order' i.id %}">Cancel</a></button>
      </div>
    </div>
  </div>
</div>


<!-- modal 2 -->
<div class="modal fade" id="exampleModalCenter2{{i.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Are you sure you want to return the product...?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary text-white"><a class="text-white" href="{% url 'return_order' i.id %}">return</a></button>
      </div>
    </div>
  </div>
</div>

                            
                {% endfor %}
            </tbody>
          </table>  
  
  <div></div>
  
  <nav class="d-flex justify-content-center mt-3">
    {% if paged_products.has_other_pages %}
    <ul class="pagination pagination-lg justify-content-center">
      {% if paged_products.has_previous %}
      <li class="page-item ">
        <a class="page-link" href="?page={{product.previous_page_number}}" aria-label="Previous">
          Previous
        </a>
      </li>
      {% else %}
      <li class="page-item disabled">
        <a class="page-link" href="#" aria-label="Previous">Previous </a>
      </li>
      {% endif %}
  
      {% for i in paged_products.paginator.page_range %}
        {% if paged_products.number == i %}
          <li class="page-item"><a class="page-link" href="#">{{i}}</a></li>
        {% else %}
        <li class="page-item"><a class="page-link" href="?page={{i}}">{{i}}</a></li>
        {% endif %}
        {% endfor %}
  
  
        {% if paged_products.has_next %}
        <li class="page-item ">
          <a class="page-link" href="?page={{product.next_page_number}}" aria-label="Previous">
            Previous
          </a>
        </li>
        {% else %}
        <li class="page-item disabled">
          <a class="page-link" href="#" aria-label="Previous"> Next </a>
  
        </li>
        {% endif %}
    </ul>
    {% endif %}
  </nav>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>  


</body>
</html>